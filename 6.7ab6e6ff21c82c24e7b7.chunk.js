(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./app/containers/BlocksPage/index.js":function(e,t,a){"use strict";a.r(t);var o=a("./node_modules/react-redux/lib/index.js"),n=a("./node_modules/redux/es/index.js"),s=a("./node_modules/reselect/es/index.js"),r=a("./app/utils/injectReducer.js"),c=a("./app/utils/injectSaga.js"),l="hubblescan/BlocksPage/GET_BLOCK_LIST_REQUEST",i="hubblescan/BlocksPage/GET_BLOCK_LIST_SUCCESS",u="hubblescan/BlocksPage/SET_LAST_BLOCK";function d(e){return{type:i,data:e}}function p(e){return{type:u,data:e}}var f=function(e){return e.get("blocks")},g=a("./node_modules/immutable/dist/immutable.js"),m=Object(g.fromJS)({blocks:[],lastBlock:0});var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case i:return e.set("blocks",t.data);case u:return e.set("lastBlock",t.data);default:return e}},h=a("./node_modules/redux-saga/es/effects.js"),k=a("./app/utils/request.js"),v=regeneratorRuntime.mark(j),P=regeneratorRuntime.mark(x);function j(e){var t,a,o,n,s,r,c,l=e.data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1,a=10,o=l.lastBlock,n=l.rowsPerPage,!o||0===o){e.next=9;break}(t=(a=o)-n)<1&&(t=1),e.next=17;break;case 9:return e.next=11,Object(h.a)(k.a,"Status");case 11:if(!(s=e.sent)){e.next=17;break}return a=s.LatestBlockHeight,t=a-n,e.next=17,Object(h.b)(p(a));case 17:return r="Blocks/"+t+"/"+a,e.prev=18,e.next=21,Object(h.a)(k.a,r);case 21:if(!(c=e.sent)){e.next=27;break}return e.next=25,Object(h.b)(d(c.Blocks));case 25:e.next=29;break;case 27:return e.next=29,Object(h.b)(d([]));case 29:e.next=35;break;case 31:return e.prev=31,e.t0=e.catch(18),e.next=35,Object(h.b)(d([]));case 35:case"end":return e.stop()}},v,this,[[18,31]])}function x(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)(l,j);case 2:case"end":return e.stop()}},P,this)}var y,_=a("./node_modules/react/index.js"),B=a.n(_),w=a("./node_modules/react-helmet/lib/Helmet.js"),O=a("./node_modules/react-router-dom/index.js"),S=(a("./node_modules/prop-types/index.js"),a("./node_modules/@material-ui/core/styles/index.js")),T=a("./node_modules/@material-ui/core/Table/index.js"),L=a.n(T),C=a("./node_modules/@material-ui/core/TableBody/index.js"),R=a.n(C),E=a("./node_modules/@material-ui/core/TableCell/index.js"),N=a.n(E),H=a("./node_modules/@material-ui/core/TableHead/index.js"),I=a.n(H),A=a("./node_modules/@material-ui/core/TablePagination/index.js"),G=a.n(A),J=a("./node_modules/@material-ui/core/TableRow/index.js"),K=a.n(J),U=a("./node_modules/@material-ui/core/Paper/index.js"),D=a.n(U),M=(a("./app/containers/BlocksPage/style.scss"),y="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,a,o){var n=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={}),t&&n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);else t||(t=n||{});if(1===s)t.children=o;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:y,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}),$=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}();var q=M(w.Helmet,{},void 0,M("title",{},void 0,"Account Page"),M("meta",{name:"description",content:"Account Page"})),z=M(I.a,{},void 0,M(K.a,{},void 0,M(N.a,{},void 0,"Block Number"),M(N.a,{},void 0,"Timestamp"),M(N.a,{},void 0,"Block Hash"),M(N.a,{},void 0,"Num Txs"))),Q=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.calculateLastPage=function(e,t){return console.log("calc last page",e,t),Math.ceil(t/e)},a.handleChangeRowsPerPage=function(e){var t=e.target.value,o=a.props.lastBlock,n=a.calculateLastPage(t,o);a.setState({rowsPerPage:t,lastPage:n,page:0},a.fetchBlocks)},a.handleChangePage=function(e,t){a.setState({page:t},a.fetchBlocks)},a.fetchBlocks=function(){var e=a.props.lastBlock,t=a.state,o=t.rowsPerPage,n=t.page;if(e){var s=e-o*n;a.props.getBlockList(s,o)}else a.props.getBlockList(e,o)},a.renderBlock=function(e){var t=e.header;return M(K.a,{},t.height,M(N.a,{component:"th",scope:"row"},void 0,M(O.Link,{to:"blocks/"+t.height},void 0,t.height)),M(N.a,{},void 0,t.time),M(N.a,{},void 0,t.block_hash),M(N.a,{},void 0,t.num_txs?t.num_txs:0))},a.state={rowsPerPage:10,page:0,lastPage:a.calculateLastPage(10,e.lastBlock)},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,B.a.Component),$(t,[{key:"componentDidMount",value:function(){this.fetchBlocks()}},{key:"componentDidUpdate",value:function(e,t){if(e.lastBlock!==this.props.lastBlock){var a=this.state.rowsPerPage,o=this.calculateLastPage(a,this.props.lastBlock);this.setState({rowsPerPage:a,lastPage:o})}}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.blocks,o=e.lastBlock,n=this.state,s=n.rowsPerPage,r=n.page;n.lastPage;return M("div",{className:"account-page"},void 0,q,M("div",{},void 0,M(D.a,{className:t.root},void 0,M(L.a,{className:t.table},void 0,z,M(R.a,{},void 0,a.map(this.renderBlock))),M(G.a,{rowsPerPageOptions:[10,20,50,100],component:"div",count:o,rowsPerPage:s,page:r,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))))}}]),t}(),W=Object(S.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,marginBottom:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700}}})(Q),X=Object(s.b)({blocks:Object(s.a)(f,function(e){return e.get("blocks")}),lastBlock:Object(s.a)(f,function(e){return e.get("lastBlock")})}),F=Object(o.connect)(X,function(e){return{getBlockList:function(t,a){return e({type:l,data:{lastBlock:t,rowsPerPage:a}})}}}),V=Object(r.a)({key:"blocks",reducer:b}),Y=Object(c.a)({key:"blocks",saga:x});t.default=Object(n.compose)(V,Y,F)(W)},"./app/containers/BlocksPage/style.scss":function(e,t,a){var o=a("./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./app/containers/BlocksPage/style.scss");"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("./node_modules/style-loader/lib/addStyles.js")(o,n);o.locals&&(e.exports=o.locals)},"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./app/containers/BlocksPage/style.scss":function(e,t,a){(e.exports=a("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".account-page h1{font-size:2em;margin-bottom:.25em}.account-page ul{font-family:Georgia,Times,Times New Roman,serif;padding-left:1.75em}.account-page ul li{margin:1em 0}.account-page ul li p.title{font-weight:700}",""])}}]);